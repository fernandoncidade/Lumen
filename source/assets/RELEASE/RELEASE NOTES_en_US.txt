RELEASE NOTES — Lúmen
Version: 2025.11.29.0
Date: November 29, 2025
Author: Fernando Nillsson Cidade

Quick summary
- Fix in the Accessible Reader (TTS) behavior: when clicking "⏸️ Pause" playback now remains paused and newly generated chunks are kept queued, preventing the reader from automatically advancing to the next chunk.

Detailed changes
- Modified file: source/modules/leitor/leitor_acessivel/lta_09_play_generated_audio.py
  - Pause behavior fixed:
    - Before: when the user paused playback, newly generated audio files (chunks) could start automatically, causing the reader to skip the pause.
    - Now: the _play_generated_audio function explicitly checks the player state (QMediaPlayer.PausedState) and the internal _is_paused flag. If the player is paused, new chunks do NOT start automatically — they are only added to the queue (_generated_queue) for later playback.
  - Additional protections:
    - Preservation of chunks during voice change: if _changing_voice is active, generated chunks are safely discarded (attempt to remove the file) and ignored.
    - Duplicate control: generated file paths are recorded in _generated_files to avoid duplicate reprocessing.
    - Playback state check: does not attempt to start new audio if already in PlayingState; respects PausedState.
  - Robustness and logging:
    - Expanded exception handling to avoid silent failures and ensure leitura_finalizada() is called when appropriate.
    - Log messages document errors when starting chunk playback and failures when cleaning up generated files.

Impact and expected behavior
- User pauses narration with the "⏸️ Pause" button: playback stops; newly generated chunks from the TTS mechanism are queued and do NOT start playing until the user manually resumes (▶️ Continue) or the player is in a state that allows automatic playback.
- Voice change during generation: chunks created during a voice change are safely discarded to avoid playback with the old voice.

How to test (quick steps)
1. Start Accessible Reader with a voice that uses chunked generation (Edge TTS or similar).
2. Start reading.
3. While playing, click "⏸️ Pause".
4. Confirm playback stops and that newly generated chunks (e.g., for long texts) do not start automatically.
5. Click "▶️ Continue" and confirm the queue is consumed normally and playback resumes.

Technical notes
- The fix focuses on _play_generated_audio and interacts with QMediaPlayer.playbackState() and the internal _is_paused flag.
- Compatibility with existing audio generation and temporary file cleanup flows is preserved.

_________________________________________________

RELEASE NOTES — Lúmen
Version: 2025.11.26.0
Date: November 26, 2025
Author: Fernando Nillsson Cidade

Release summary
- Initial alpha/experimental release of the Lúmen project. Desktop tool to support neurodivergent youth and adults (ASD, ADHD, Dyslexia) in reading, organization and active study review. Replaces references to previous projects (e.g., Economia APP) and aligns package artifacts (EULA, PRIVACY_POLICY, NOTICES, COPYRIGHT, CLC) with the new scope.

Key features included
- Accessible reader (TTS) with voice selection, speed and volume control; audio player for synthesized text.
- Persistent typographic adjustments (font size and family) for readability.
- Focus ruler (movable highlight) to facilitate line‑by‑line visual tracking.
- Eisenhower Matrix for task prioritization with local saving.
- Pomodoro timer and study session manager.
- Tools for creating and reviewing mind maps and support for the Feynman Technique.
- Local data import/export: PDF, JSON and text formats.
- Localization: pt-BR and en-US ( .ts files included; generate .qm before packaging).

Files and resources included in this package
- Code: source/ folder
- Utilities: utils/ folder (logging, paths and helpers)
- Assets: assets/ folder (ABOUT, EULA, NOTICES, COPYRIGHT, CLC, PRIVACY_POLICY, RELEASE)
- Translations: language/translations/*.ts (pt_BR, en_US) — generate .qm with pyside6-lrelease
- Documentation: assets/ABOUT/*.txt, assets/EULA/*.txt, assets/NOTICES/*.txt, assets/COPYRIGHT/*.txt, assets/CLC/*.txt

Installation (Windows — development)
1. Install Python 3.10+.
2. In PowerShell:
   python -m venv .venv
   .\.venv\Scripts\Activate.ps1
   pip install -r requirements.txt
3. Run in development:
   python main.py

Packaging for distribution (tips)
- PyInstaller, Nuitka is recommended to generate a Windows executable. Include assets/ and language/translations/ in the .spec 'datas'.
- Include license and notice files (assets/EULA, assets/NOTICES, assets/COPYRIGHT, assets/CLC, assets/PRIVACY_POLICY).
- If bundling PySide6 libraries, document LGPL compliance procedures according to assets/NOTICES/NOTICE_pt_BR.txt.
- Ensure .qm translation files are present in the bundle.

Data storage location
- Settings, history, temporary files and logs are saved at:
  %LOCALAPPDATA%\TEA_TDAH_Dislexia
- Note: local storage is the default; the application does not send telemetry automatically (see assets/PRIVACY_POLICY/Privacy_Policy_pt_BR.txt).

Technical notes and dependencies
- Main dependency: PySide6 (LGPL v3 as per version).
- Check requirements.txt for additional dependencies.
- Logging: utils/LogManager.py (logs at %LOCALAPPDATA%\TEA_TDAH_Dislexia).
- Tests: current release uses manual tests; adding unit tests for reading/TTS, export and task management is recommended.

Known issues (current release)
- Some UI screens and flows still contain stubs to complete (source/ui, source/services).
- Translations require compilation (.qm) before packaging.
- Input validation needs strengthening (empty fields, decimal separator, negative limits).

Roadmap / next steps
- Complete and test all UI modules and services with automated test coverage.
- Improve PDF export and report layout.
- Automate build process and Windows installer generation.
- Implement opt‑in telemetry for diagnostics (only with explicit consent).
- Review and update license documentation and notices when additional components are included.

Support and contact
- Author: Fernando Nillsson Cidade
- Bugs, issues and contributions: open an issue / pull request in the project repository (see README).
- Email for privacy and license related requests: linceu_lighthouse@outlook.com

Legal compliance notes
- See the included assets/ files for full terms:
  - EULA: assets/EULA/EULA_pt_BR.txt
  - Privacy Policy: assets/PRIVACY_POLICY/Privacy_Policy_pt_BR.txt
  - Notices / Third‑party licenses: assets/NOTICES/NOTICE_pt_BR.txt
  - Copyright / Trademark: assets/COPYRIGHT/AVISO DE COPYRIGHT E MARCA REGISTRA_pt_BR.txt
  - Commercial agreement: assets/CLC/CLC_pt_BR.txt
